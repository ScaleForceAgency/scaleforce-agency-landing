---
import Layout from '~/layouts/PageLayout.astro';
import HeroText from '~/components/widgets/HeroText.astro';
import ContactUs from '~/components/widgets/Contact.astro';
import Features2 from '~/components/widgets/Features2.astro';
import Calendly from '~/components/widgets/Calendly.astro';

import { fetchRecords } from '../integrations/astro-airtable/astro-airtable';
// Fetch records from Airtable
const contactPageContent = await fetchRecords('tblp5aKVIReTS7nLu');

const metadata = {
  title: `${contactPageContent[0].title}`,
};
---

<Layout metadata={metadata}>

  <!-- HeroText Widget ******************* -->

  <HeroText tagline={`${contactPageContent[1].description}`} title={`${contactPageContent[1].title}`} />

  <!-- Calendly Widget -->

  <Calendly id="calendly" class="min-h-screen"/>

  <!-- Contact Form Widget -->

  <ContactUs
    id="form"
    title={`${contactPageContent[2].title}`}
    subtitle={`${contactPageContent[2].description}`}
    inputs={[
      {
        type: 'text',
        name: 'name',
        label: 'Name',
      },
      {
        type: 'email',
        name: 'email',
        label: 'Email',
      },
    ]}
    textarea={{
      label: 'Message',
    }}
    disclaimer={{
      label:
        'By submitting this contact form, you acknowledge and agree to the collection of your personal information.',
    }}
    description="Our support team typically responds within 24 business hours."
  />

  <!-- Contact Info Widget ************** -->

  <Features2
    title={`${contactPageContent[11].title}`}
    items={[...contactPageContent].slice(12,18)}
  />

  <!-- Locations Widget ************** -->

  <Features2
    title={`${contactPageContent[18].title}`}
    tagline={`${contactPageContent[18].description}`}
    columns={4}
    items={[...contactPageContent].slice(19,23)}
  />

  <!-- Tech Support Widget ************** -->

  <Features2
    title={`${contactPageContent[23].title}`}
    tagline={`${contactPageContent[23].description}`}
    columns={2}
    items={[...contactPageContent].slice(24,26)}
  />
</Layout>
